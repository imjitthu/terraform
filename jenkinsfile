pipeline {

    agent any

    parameters {
    choice(name: 'tfaction', choices: ['init', 'plan', 'apply', 'destroy'], description: 'Pick any action')
               }

    stages {
        stage ('Creating infra for RoboShop') {
            steps {
                script {
                    if (params.tfaction == 'init') {
                    sh "terraform ${params.tfaction}"
                    } 
                    if (params.tfaction == 'plan') {
                    sh "terraform plan" 
                    } 
                    if (params.tfaction == 'apply') {
                    sh "terraform apply -auto-approve" 
                    } 
                    if (params.tfaction == 'destroy') {
                    sh "terraform destroy -auto-approve"   
                    }                         
                    }
                    }
                  }
                }
            }